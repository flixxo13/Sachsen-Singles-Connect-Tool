<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sachsen Singles Connect</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.3/cdn.min.js" defer></script>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garant:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
:root{
  --g9:#004d25;--g7:#00692f;--g:#00833e;--g4:#2db567;--g1:#d4eddf;--g0:#eef8f2;
  --gold:#c8a400;--gold0:#fbf6dc;
  --gray9:#141414;--gray7:#3d3d3d;--gray5:#767676;--gray3:#c8c8c8;--gray1:#f2f2f2;--gray0:#f8f8f8;
  --red:#dc2626;--red0:#fff5f5;--red1:#fecaca;
  --shadow:0 4px 20px rgba(0,100,50,.12);--shadowlg:0 12px 40px rgba(0,100,50,.18);
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'DM Sans',sans-serif;background:var(--gray0);color:var(--gray9);min-height:100vh;overflow-x:hidden;}
[x-cloak]{display:none!important;}
.serif{font-family:'Cormorant Garant',serif;}
.lock{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem;background:#00692f url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 3L37 20L20 37L3 20Z' fill='none' stroke='rgba(255,255,255,.07)' stroke-width='1.2'/%3E%3C/svg%3E") 0 0/40px 40px;}
.lock-card{background:#fff;border-radius:22px;padding:2.2rem 1.8rem;width:100%;max-width:360px;box-shadow:var(--shadowlg);position:relative;overflow:hidden;}
.lock-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--g),var(--gold));}
.lock-icon{width:68px;height:68px;background:var(--g);border-radius:18px;display:flex;align-items:center;justify-content:center;margin:0 auto 1.2rem;font-size:1.9rem;box-shadow:0 8px 24px rgba(0,131,62,.3);}
.code-input{width:100%;font-size:1.6rem;font-weight:700;letter-spacing:.35em;text-align:center;background:var(--gray0);border:2px solid var(--gray3);border-radius:12px;padding:.9rem;outline:none;transition:.2s;font-family:'DM Sans',sans-serif;color:var(--gray9);}
.code-input:focus{border-color:var(--g);background:var(--g0);box-shadow:0 0 0 4px rgba(0,131,62,.1);}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-7px)}75%{transform:translateX(7px)}}
.shake{animation:shake .35s ease;}
.btn{width:100%;border:none;border-radius:12px;padding:.85rem 1.2rem;font-family:'DM Sans',sans-serif;font-size:.95rem;font-weight:600;cursor:pointer;transition:.2s;display:flex;align-items:center;justify-content:center;gap:.45rem;}
.btn-green{background:var(--g);color:#fff;} .btn-green:hover{background:var(--g7);transform:translateY(-1px);}
.btn-gold{background:var(--gold);color:#1a1100;} .btn-gold:hover{background:#b89400;}
.btn-soft{background:var(--g0);color:var(--g7);border:2px solid var(--g1);} .btn-soft:hover{background:var(--g1);}
.btn-sm{padding:.5rem .9rem;font-size:.82rem;border-radius:10px;width:auto;}
.btn-danger{background:var(--red);color:#fff;}
.btn-dark{background:var(--gray9);color:#fff;}
.nav{position:sticky;top:0;z-index:100;background:#fff;border-bottom:1px solid var(--gray1);box-shadow:0 2px 8px rgba(0,0,0,.06);}
.nav-inner{max-width:700px;margin:0 auto;padding:.8rem 1.2rem;display:flex;align-items:center;justify-content:space-between;}
.logo{display:flex;align-items:center;gap:.55rem;}
.logo-box{width:34px;height:34px;background:var(--g);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:.95rem;}
.logo-text{font-family:'Cormorant Garant',serif;font-size:1.25rem;font-weight:700;color:var(--g9);line-height:1.1;}
.logo-sub{font-family:'DM Sans',sans-serif;font-size:.6rem;font-weight:600;color:var(--g4);letter-spacing:.08em;}
.filters{background:#fff;border-bottom:1px solid var(--gray1);padding:.75rem 1.2rem;}
.filter-row{max-width:700px;margin:0 auto;display:flex;gap:.55rem;overflow-x:auto;scrollbar-width:none;align-items:center;}
.filter-row::-webkit-scrollbar{display:none;}
select.fsel{background:var(--gray0);border:1.5px solid var(--gray3);border-radius:9px;padding:.4rem .75rem;font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:500;color:var(--gray7);cursor:pointer;outline:none;flex-shrink:0;}
.chip{background:var(--gray0);border:1.5px solid var(--gray3);border-radius:9px;padding:.4rem .85rem;font-size:.82rem;font-weight:500;color:var(--gray7);cursor:pointer;white-space:nowrap;flex-shrink:0;transition:.15s;}
.chip.on{background:var(--g0);border-color:var(--g);color:var(--g7);}
.gallery{max-width:700px;margin:0 auto;padding:1rem 1.2rem;display:grid;grid-template-columns:repeat(2,1fr);gap:.9rem;}
@media(min-width:500px){.gallery{grid-template-columns:repeat(3,1fr);}}
.card{background:#fff;border-radius:16px;overflow:hidden;box-shadow:var(--shadow);cursor:pointer;transition:.22s;}
.card:hover{transform:translateY(-3px);box-shadow:var(--shadowlg);}
.card-img{position:relative;aspect-ratio:3/4;overflow:hidden;}
.card-avatar{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-family:'Cormorant Garant',serif;font-size:2.8rem;font-weight:700;}
.card-img img{width:100%;height:100%;object-fit:cover;transition:.4s;} .card:hover .card-img img{transform:scale(1.05);}
.badge-v{position:absolute;top:7px;right:7px;background:rgba(0,131,62,.9);color:#fff;font-size:.62rem;font-weight:600;padding:2px 7px;border-radius:20px;}
.badge-n{position:absolute;top:7px;left:7px;background:rgba(200,164,0,.95);color:#1a1100;font-size:.62rem;font-weight:700;padding:2px 7px;border-radius:20px;}
.card-body{padding:.7rem .8rem .8rem;}
.card-name{font-family:'Cormorant Garant',serif;font-size:1.1rem;font-weight:700;line-height:1.1;margin-bottom:2px;}
.card-meta{font-size:.75rem;color:var(--gray5);margin-bottom:.55rem;}
.btn-connect{width:100%;background:var(--g);color:#fff;border:none;border-radius:9px;padding:.5rem;font-family:'DM Sans',sans-serif;font-size:.78rem;font-weight:600;cursor:pointer;transition:.2s;}
.btn-connect:hover{background:var(--g7);}
.fab{position:fixed;bottom:1.4rem;right:1.4rem;background:var(--g);color:#fff;border:none;border-radius:16px;padding:.9rem 1.3rem;font-family:'DM Sans',sans-serif;font-size:.9rem;font-weight:600;cursor:pointer;box-shadow:0 8px 28px rgba(0,131,62,.4);transition:.2s;display:flex;align-items:center;gap:.45rem;z-index:90;}
.fab:hover{background:var(--g7);transform:translateY(-2px);}
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:200;display:flex;align-items:flex-end;justify-content:center;backdrop-filter:blur(3px);}
.sheet{background:#fff;border-radius:22px 22px 0 0;width:100%;max-width:700px;max-height:92vh;overflow-y:auto;padding:1.4rem 1.4rem 2.5rem;}
.handle{width:38px;height:4px;background:var(--gray3);border-radius:2px;margin:0 auto 1.3rem;}
.sheet::-webkit-scrollbar{width:3px;} .sheet::-webkit-scrollbar-thumb{background:var(--gray3);border-radius:2px;}
.flabel{font-size:.83rem;font-weight:600;color:var(--gray7);margin-bottom:.3rem;display:block;}
.finput{width:100%;background:var(--gray0);border:2px solid var(--gray3);border-radius:11px;padding:.7rem .9rem;font-family:'DM Sans',sans-serif;font-size:.95rem;color:var(--gray9);outline:none;transition:.2s;appearance:none;}
.finput:focus{border-color:var(--g);background:var(--g0);box-shadow:0 0 0 3px rgba(0,131,62,.1);}
.fgroup{margin-bottom:1rem;}
.steps{display:flex;gap:.4rem;justify-content:center;margin-bottom:1.3rem;}
.dot{width:8px;height:8px;border-radius:50%;background:var(--gray3);transition:.3s;} .dot.on{background:var(--g);width:22px;border-radius:4px;}
.consent-box{display:flex;align-items:flex-start;gap:.7rem;background:var(--g0);border:1.5px solid var(--g1);border-radius:12px;padding:.9rem;}
.consent-box input[type=checkbox]{width:18px;height:18px;accent-color:var(--g);flex-shrink:0;margin-top:2px;cursor:pointer;}
.magic-box{background:var(--gray0);border:2px dashed var(--g4);border-radius:11px;padding:.9rem;font-family:monospace;font-size:.75rem;color:var(--g7);word-break:break-all;margin:.9rem 0;}
.success-box{background:linear-gradient(135deg,var(--g0),var(--gold0));border:2px solid var(--g1);border-radius:15px;padding:1.3rem;text-align:center;margin-bottom:1rem;}
.tag{display:inline-flex;align-items:center;gap:.2rem;background:var(--g0);color:var(--g7);border:1px solid var(--g1);border-radius:6px;padding:2px 8px;font-size:.7rem;font-weight:600;}
.my-banner{max-width:700px;margin:.9rem auto 0;padding:0 1.2rem;}
.banner-inner{background:linear-gradient(135deg,var(--g9),var(--g7));border-radius:14px;padding:.9rem 1.1rem;display:flex;align-items:center;justify-content:space-between;color:#fff;}
.sec-title{font-family:'Cormorant Garant',serif;font-size:1.05rem;font-weight:700;color:var(--gray7);max-width:700px;margin:.8rem auto .2rem;padding:0 1.2rem;display:flex;align-items:center;gap:.5rem;}
.count{background:var(--g0);color:var(--g7);font-size:.75rem;font-weight:600;padding:1px 9px;border-radius:20px;font-family:'DM Sans',sans-serif;}
.err{color:var(--red);font-size:.8rem;margin-bottom:.65rem;}
.detail-avatar{width:100%;height:200px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-family:'Cormorant Garant',serif;font-size:4.5rem;font-weight:700;margin-bottom:1.1rem;}
.detail-img{width:100%;height:220px;object-fit:cover;border-radius:14px;margin-bottom:1.1rem;}
.bio-box{background:var(--gray0);border-radius:11px;padding:.9rem;margin:.7rem 0;}
.bio-box .bio-lbl{font-size:.75rem;font-weight:600;color:var(--gray5);margin-bottom:.3rem;}
/* Admin */
.admin-nav{background:var(--gray9);color:#fff;position:sticky;top:0;z-index:100;}
.admin-nav-inner{max-width:700px;margin:0 auto;padding:.8rem 1.2rem;display:flex;align-items:center;justify-content:space-between;}
.admin-tab-row{background:var(--gray9);border-bottom:2px solid #333;padding:0 1.2rem;}
.admin-tab-inner{max-width:700px;margin:0 auto;display:flex;gap:0;overflow-x:auto;scrollbar-width:none;}
.admin-tab-inner::-webkit-scrollbar{display:none;}
.atab{padding:.7rem 1rem;font-size:.82rem;font-weight:600;color:#aaa;cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-2px;white-space:nowrap;transition:.15s;}
.atab.on{color:#fff;border-bottom-color:var(--gold);}
.admin-body{max-width:700px;margin:0 auto;padding:1.2rem;}
.q-card{background:#fff;border-radius:14px;box-shadow:var(--shadow);padding:1rem 1.1rem;margin-bottom:.9rem;border-left:4px solid var(--gold);}
.q-card.gesperrt{border-left-color:var(--red);} .q-card.aktiv{border-left-color:var(--g);}
.q-name{font-family:'Cormorant Garant',serif;font-size:1.2rem;font-weight:700;}
.q-meta{font-size:.78rem;color:var(--gray5);margin:.2rem 0 .75rem;}
.q-actions{display:flex;gap:.5rem;flex-wrap:wrap;}
.q-btn{padding:.45rem .85rem;font-size:.78rem;font-weight:600;border:none;border-radius:9px;cursor:pointer;transition:.15s;font-family:'DM Sans',sans-serif;}
.q-btn-ok{background:var(--g0);color:var(--g7);} .q-btn-ok:hover{background:var(--g1);}
.q-btn-ban{background:var(--red0);color:var(--red);} .q-btn-ban:hover{background:var(--red1);}
.q-btn-del{background:var(--gray1);color:var(--gray7);}
.q-btn-fb{background:var(--g);color:#fff;} .q-btn-fb:hover{background:var(--g7);}
.q-btn-un{background:#fff3cd;color:#856404;}
.stat-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.8rem;margin-bottom:1.3rem;}
@media(min-width:500px){.stat-grid{grid-template-columns:repeat(4,1fr);}}
.stat-card{background:#fff;border-radius:13px;padding:.9rem;box-shadow:var(--shadow);text-align:center;}
.stat-num{font-family:'Cormorant Garant',serif;font-size:2rem;font-weight:700;}
.stat-lbl{font-size:.72rem;color:var(--gray5);margin-top:.1rem;}
.code-box{background:#fff;border-radius:14px;box-shadow:var(--shadow);padding:1.2rem;}
.current-code{background:var(--gray9);color:var(--gold);font-family:monospace;font-size:1.1rem;font-weight:700;letter-spacing:.15em;border-radius:10px;padding:.7rem 1rem;margin:.6rem 0;text-align:center;}
.sbadge{display:inline-block;padding:2px 9px;border-radius:20px;font-size:.7rem;font-weight:700;}
.s-neu{background:#fff3cd;color:#664d03;} .s-aktiv{background:var(--g0);color:var(--g7);}
.s-gesperrt{background:var(--red0);color:var(--red);} .s-inaktiv{background:var(--gray1);color:var(--gray5);}
.info-row{display:flex;justify-content:space-between;font-size:.82rem;padding:.3rem 0;border-bottom:1px solid var(--gray1);align-items:center;}
.info-row:last-child{border:none;}
.admin-pin-screen{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1.5rem;background:var(--gray9);}
.admin-pin-card{background:#1a1a1a;border-radius:20px;padding:2rem 1.8rem;width:100%;max-width:340px;border:1px solid #333;}
/* Loading spinner */
.spinner{display:inline-block;width:18px;height:18px;border:2.5px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}
.spinner-green{border-color:rgba(0,131,62,.2);border-top-color:var(--g);}
/* Toast */
.toast{position:fixed;bottom:5rem;left:50%;transform:translateX(-50%);background:var(--gray9);color:#fff;padding:.75rem 1.4rem;border-radius:12px;font-size:.85rem;font-weight:600;z-index:999;box-shadow:var(--shadowlg);white-space:nowrap;}
@keyframes fadeUp{from{opacity:0;transform:translate(-50%,10px)}to{opacity:1;transform:translate(-50%,0)}}
.toast{animation:fadeUp .3s ease;}
/* Loading overlay */
.loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);z-index:300;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(2px);}
.loading-card{background:#fff;border-radius:16px;padding:1.5rem 2rem;text-align:center;box-shadow:var(--shadowlg);}
@keyframes cardFadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
.card{animation:cardFadeUp .4s ease both;}
.card:nth-child(1){animation-delay:.05s} .card:nth-child(2){animation-delay:.10s}
.card:nth-child(3){animation-delay:.15s} .card:nth-child(4){animation-delay:.20s}
.card:nth-child(5){animation-delay:.25s} .card:nth-child(6){animation-delay:.30s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{transform:translateY(35px);opacity:0}to{transform:translateY(0);opacity:1}}
.fade{animation:fadeIn .3s ease both;}
.slide{animation:slideUp .38s cubic-bezier(.34,1.56,.64,1) both;}
</style>
</head>
<body x-data="app()" x-init="init()">

<!-- â•â• LOADING OVERLAY â•â• -->
<div x-show="loading" class="loading-overlay" x-cloak>
  <div class="loading-card">
    <div style="margin-bottom:.75rem;"><div class="spinner spinner-green" style="margin:0 auto;width:32px;height:32px;border-width:3px;"></div></div>
    <div style="font-weight:600;color:var(--g7);" x-text="loadingMsg"></div>
  </div>
</div>

<!-- â•â• TOAST â•â• -->
<div x-show="toast" class="toast" x-text="toastMsg" x-cloak></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LOCK SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='lock'" class="lock" x-cloak>
  <div class="lock-card" style="animation:cardFadeUp .45s ease both;">
    <div class="lock-icon">ğŸ’š</div>
    <h1 class="serif" style="font-size:1.55rem;font-weight:700;text-align:center;color:var(--g9);margin-bottom:.2rem;">Sachsen Singles</h1>
    <p style="text-align:center;color:var(--gray5);font-size:.85rem;margin-bottom:1.6rem;">Exklusiv fÃ¼r Mitglieder der Gruppe</p>
    <label class="flabel" style="text-align:center;display:block;">ğŸ” Wochencode eingeben</label>
    <input class="code-input" :class="{shake:lockErr}" type="text" x-model="code"
      placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="12" @keydown.enter="checkCode()" @animationend="lockErr=false"/>
    <p x-show="lockErr" style="text-align:center;color:var(--red);font-size:.8rem;margin-top:.45rem;">âŒ Falscher Code â€” schau in der Facebook-Gruppe nach!</p>
    <button class="btn btn-green" style="margin-top:1.1rem;" @click="checkCode()" :disabled="loading">
      <span x-show="!loading">Eintreten â†’</span>
      <span x-show="loading" class="spinner"></span>
    </button>
    <button class="btn btn-dark" style="margin-top:.6rem;background:#1a1a1a;" @click="view='adminlogin'">ğŸ›¡ï¸ Admin-Bereich</button>
    <p style="text-align:center;font-size:.73rem;color:var(--gray3);margin-top:1.2rem;">Code im Pinpost der <strong style="color:var(--g7);">Sachsen Singles Connect</strong> Gruppe</p>
  </div>
  <p style="color:rgba(255,255,255,.35);font-size:.7rem;margin-top:1.2rem;">ğŸ”’ SSL Â· DSGVO Â· Kostenlos</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADMIN LOGIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='adminlogin'" class="admin-pin-screen" x-cloak>
  <div class="admin-pin-card" style="animation:cardFadeUp .45s ease both;">
    <div style="text-align:center;font-size:2.2rem;margin-bottom:.8rem;">ğŸ›¡ï¸</div>
    <h2 class="serif" style="font-size:1.4rem;font-weight:700;color:#fff;text-align:center;margin-bottom:.3rem;">Admin-Bereich</h2>
    <p style="color:#888;font-size:.82rem;text-align:center;margin-bottom:1.5rem;">Nur fÃ¼r den Gruppenadmin</p>
    <div class="fgroup">
      <label class="flabel" style="color:#aaa;">Admin-PIN</label>
      <input class="finput" type="password" x-model="adminPin" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢"
        :class="{shake:adminErr}" @keydown.enter="checkAdmin()" @animationend="adminErr=false"
        style="background:#2a2a2a;border-color:#444;color:#fff;"/>
    </div>
    <p x-show="adminErr" style="color:var(--red);font-size:.8rem;margin-bottom:.7rem;">âŒ Falscher PIN</p>
    <button class="btn btn-gold" @click="checkAdmin()" :disabled="loading">Einloggen â†’</button>
    <button class="btn btn-soft" @click="view='lock'" style="margin-top:.6rem;">â† ZurÃ¼ck</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ADMIN PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='admin'" x-cloak class="fade">
  <div class="admin-nav">
    <div class="admin-nav-inner">
      <div style="display:flex;align-items:center;gap:.6rem;">
        <span style="font-size:1.1rem;">ğŸ›¡ï¸</span>
        <div><div style="font-weight:700;font-size:.95rem;">Admin-Panel</div><div style="font-size:.65rem;color:#888;">Sachsen Singles Connect</div></div>
      </div>
      <div style="display:flex;gap:.5rem;align-items:center;">
        <span x-show="adminQueue.length>0" style="background:var(--red);color:#fff;border-radius:20px;padding:2px 8px;font-size:.72rem;font-weight:700;" x-text="adminQueue.length+' neu'"></span>
        <button class="btn btn-soft btn-sm" @click="view='gallery'" style="background:rgba(255,255,255,.1);border-color:#444;color:#ccc;font-size:.78rem;">App â†’</button>
        <button class="btn btn-soft btn-sm" @click="adminLogout()" style="background:transparent;border-color:#555;color:#888;padding:.4rem .6rem;">ğŸšª</button>
      </div>
    </div>
  </div>
  <div class="admin-tab-row">
    <div class="admin-tab-inner">
      <div class="atab" :class="{on:adminTab==='queue'}" @click="adminTab='queue'">
        ğŸ“‹ Queue <span x-show="adminQueue.length>0" style="background:var(--red);color:#fff;border-radius:10px;padding:1px 6px;font-size:.65rem;margin-left:.3rem;" x-text="adminQueue.length"></span>
      </div>
      <div class="atab" :class="{on:adminTab==='alle'}" @click="adminTab='alle'">ğŸ‘¥ Alle Profile</div>
      <div class="atab" :class="{on:adminTab==='code'}" @click="adminTab='code'">ğŸ”‘ Wochencode</div>
      <div class="atab" :class="{on:adminTab==='stats'}" @click="adminTab='stats'">ğŸ“Š Statistik</div>
    </div>
  </div>

  <!-- Queue -->
  <div class="admin-body" x-show="adminTab==='queue'">
    <div x-show="adminQueue.length===0" style="text-align:center;padding:3rem 1rem;color:var(--gray5);">
      <div style="font-size:2.5rem;margin-bottom:.7rem;">âœ…</div>
      <div style="font-weight:600;color:var(--gray7);">Queue ist leer</div>
      <div style="font-size:.85rem;margin-top:.35rem;">Alle Profile wurden bearbeitet.</div>
    </div>
    <template x-for="(p, i) in adminQueue" :key="p.id">
      <div class="q-card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:.2rem;">
          <div class="q-name" x-text="p.vorname+', '+p.alter"></div>
          <span class="sbadge s-neu">NEU</span>
        </div>
        <div class="q-meta">ğŸ“ <span x-text="p.region"></span> &nbsp;Â·&nbsp; ğŸ—“ï¸ <span x-text="formatDate(p.timestamp)"></span></div>
        <div style="background:var(--gray0);border-radius:8px;padding:.5rem .75rem;font-size:.78rem;color:var(--gray7);margin-bottom:.75rem;display:flex;align-items:center;gap:.4rem;">
          <span>ğŸ”—</span>
          <a :href="p.fb_link" target="_blank" rel="noopener" style="color:var(--g7);text-decoration:none;word-break:break-all;" x-text="p.fb_link"></a>
        </div>
        <div x-show="p.eisbrecher" style="background:var(--g0);border-radius:8px;padding:.5rem .75rem;font-size:.78rem;color:var(--gray7);margin-bottom:.75rem;">
          ğŸ’¬ <span x-text="p.eisbrecher"></span>
        </div>
        <div class="q-actions">
          <button class="q-btn q-btn-ok" @click="adminApprove(i)">âœ… Freigeben</button>
          <button class="q-btn q-btn-ban" @click="adminBan(i)">ğŸš« Sperren</button>
          <button class="q-btn q-btn-del" @click="adminDelete(i)">ğŸ—‘ï¸ LÃ¶schen</button>
          <button class="q-btn q-btn-fb" @click="openFB(p.fb_link)">ğŸ‘ï¸ FB prÃ¼fen</button>
        </div>
      </div>
    </template>
  </div>

  <!-- Alle Profile -->
  <div class="admin-body" x-show="adminTab==='alle'">
    <div style="display:flex;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap;">
      <select class="fsel" x-model="adminFilter" style="flex:1;" @change="loadAdminProfiles()">
        <option value="">Alle Status</option><option>Aktiv</option><option>Neu</option><option>Gesperrt</option><option>Inaktiv</option>
      </select>
      <select class="fsel" x-model="adminRegionFilter" style="flex:1;" @change="loadAdminProfiles()">
        <option value="">Alle Regionen</option>
        <option>Chemnitz</option><option>Dresden</option><option>Leipzig</option>
        <option>Zwickau</option><option>Plauen</option><option>GÃ¶rlitz</option><option>Erzgebirge</option><option>Sonstige</option>
      </select>
    </div>
    <template x-for="(p, i) in filteredAdmin" :key="p.id">
      <div class="q-card" :class="p.status==='Gesperrt'?'gesperrt':p.status==='Aktiv'?'aktiv':''">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:.2rem;">
          <div class="q-name" x-text="p.vorname+', '+p.alter"></div>
          <span class="sbadge" :class="'s-'+p.status.toLowerCase()" x-text="p.status"></span>
        </div>
        <div class="q-meta">ğŸ“ <span x-text="p.region"></span> &nbsp;Â·&nbsp; ğŸ—“ï¸ <span x-text="formatDate(p.timestamp)"></span></div>
        <div class="q-actions">
          <button class="q-btn q-btn-ok" x-show="p.status!=='Aktiv'" @click="adminSetStatus(p.id,'Aktiv')">âœ… Aktivieren</button>
          <button class="q-btn q-btn-ban" x-show="p.status!=='Gesperrt'" @click="adminSetStatus(p.id,'Gesperrt')">ğŸš« Sperren</button>
          <button class="q-btn q-btn-un" x-show="p.status==='Gesperrt'" @click="adminSetStatus(p.id,'Aktiv')">â†©ï¸ Entsperren</button>
          <button class="q-btn q-btn-del" @click="adminDeleteById(p.id)">ğŸ—‘ï¸ LÃ¶schen</button>
          <button class="q-btn q-btn-fb" @click="openFB(p.fb_link)">ğŸ‘ï¸ FB-Profil</button>
        </div>
      </div>
    </template>
    <div x-show="filteredAdmin.length===0&&!loading" style="text-align:center;padding:2.5rem 1rem;color:var(--gray5);">
      <div style="font-size:2rem;margin-bottom:.5rem;">ğŸ“­</div><div>Keine Profile mit diesem Filter.</div>
    </div>
  </div>

  <!-- Wochencode -->
  <div class="admin-body" x-show="adminTab==='code'">
    <div class="code-box">
      <h3 class="serif" style="font-size:1.2rem;font-weight:700;margin-bottom:.3rem;">ğŸ”‘ Wochencode verwalten</h3>
      <p style="font-size:.82rem;color:var(--gray5);margin-bottom:1rem;">Aktuell gÃ¼ltiger Code (nur du siehst das hier):</p>
      <div class="current-code" x-text="currentWeekCode||'â€” noch nicht gesetzt â€”'"></div>
      <div class="fgroup" style="margin-top:1.2rem;">
        <label class="flabel">Neuen Code eingeben</label>
        <input class="finput" type="text" x-model="newWeekCode" placeholder="z.B. HERBST2025"
          style="font-size:1.1rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;"/>
        <p style="font-size:.75rem;color:var(--gray5);margin-top:.3rem;">Nur Buchstaben & Zahlen, 4â€“12 Zeichen empfohlen.</p>
      </div>
      <button class="btn btn-gold" @click="changeWeekCode()" x-show="newWeekCode.length>=3">ğŸ”„ Code jetzt wechseln</button>
      <div style="background:#fff3cd;border:1.5px solid #ffe69c;border-radius:11px;padding:.75rem;font-size:.82rem;color:#664d03;margin-top:.9rem;">
        <strong>ğŸ“¢ Dual-Hash aktiv:</strong> Beide Codes gelten 24h gleichzeitig â€” kein User fliegt raus.
      </div>
      <div x-show="codeChanged" style="background:var(--g0);border:1.5px solid var(--g1);border-radius:11px;padding:.9rem;margin-top:.9rem;">
        <div style="font-weight:600;color:var(--g7);margin-bottom:.3rem;">âœ… Code gewechselt!</div>
        <div style="font-size:.82rem;">Jetzt in der Gruppe als Pinpost posten: <strong x-text="currentWeekCode"></strong></div>
      </div>
    </div>
  </div>

  <!-- Statistik -->
  <div class="admin-body" x-show="adminTab==='stats'">
    <div class="stat-grid">
      <div class="stat-card"><div class="stat-num" style="color:var(--g);" x-text="stats.total"></div><div class="stat-lbl">Gesamt</div></div>
      <div class="stat-card"><div class="stat-num" style="color:var(--g);" x-text="stats.aktiv"></div><div class="stat-lbl">Aktiv</div></div>
      <div class="stat-card"><div class="stat-num" style="color:var(--gold);" x-text="adminQueue.length"></div><div class="stat-lbl">In Queue</div></div>
      <div class="stat-card"><div class="stat-num" style="color:var(--red);" x-text="stats.gesperrt"></div><div class="stat-lbl">Gesperrt</div></div>
    </div>
    <div class="code-box" style="margin-bottom:1rem;">
      <h3 class="serif" style="font-size:1.1rem;font-weight:700;margin-bottom:.9rem;">ğŸ“ Nach Region</h3>
      <template x-for="r in regionStats">
        <div class="info-row">
          <span style="font-weight:500;" x-text="r.name"></span>
          <div style="display:flex;align-items:center;gap:.6rem;">
            <div style="height:6px;border-radius:3px;background:var(--g);" :style="`width:${Math.max(r.count*20,6)}px`"></div>
            <span style="font-weight:700;color:var(--g);" x-text="r.count"></span>
          </div>
        </div>
      </template>
    </div>
    <div class="code-box">
      <h3 class="serif" style="font-size:1.1rem;font-weight:700;margin-bottom:.9rem;">ğŸ‚ Altersgruppen</h3>
      <template x-for="a in ageStats">
        <div class="info-row">
          <span style="font-weight:500;" x-text="a.label"></span>
          <div style="display:flex;align-items:center;gap:.6rem;">
            <div style="height:6px;border-radius:3px;background:var(--gold);" :style="`width:${Math.max(a.count*20,6)}px`"></div>
            <span style="font-weight:700;color:var(--gold);" x-text="a.count"></span>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GALERIE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='gallery'" x-cloak class="fade">
  <nav class="nav">
    <div class="nav-inner">
      <div class="logo">
        <div class="logo-box">ğŸ’š</div>
        <div><div class="logo-text">Sachsen Singles</div><div class="logo-sub">CONNECT</div></div>
      </div>
      <div style="display:flex;gap:.45rem;align-items:center;">
        <button x-show="myProfile" class="btn btn-soft btn-sm" @click="view='myprofile'">ğŸ‘¤ Mein Profil</button>
        <button x-show="isAdmin" class="btn btn-soft btn-sm" @click="view='admin'" style="background:#1a1a1a;border-color:#333;color:#fff;">ğŸ›¡ï¸</button>
        <button class="btn btn-soft btn-sm" @click="logout()" style="color:var(--gray5);padding:.5rem .7rem;">ğŸšª</button>
      </div>
    </div>
  </nav>
  <div class="filters">
    <div class="filter-row">
      <select class="fsel" x-model="fRegion" @change="applyFilters()">
        <option value="">ğŸ“ Alle Regionen</option>
        <option>Chemnitz</option><option>Dresden</option><option>Leipzig</option>
        <option>Zwickau</option><option>Plauen</option><option>GÃ¶rlitz</option><option>Erzgebirge</option><option>Sonstige</option>
      </select>
      <select class="fsel" x-model="fAge" @change="applyFilters()">
        <option value="">ğŸ‚ Alle Alter</option>
        <option value="18-29">18â€“29</option><option value="30-39">30â€“39</option>
        <option value="40-49">40â€“49</option><option value="50-99">50+</option>
      </select>
      <button class="chip" :class="{on:fVerified}" @click="fVerified=!fVerified;applyFilters()">âœ… Verifiziert</button>
    </div>
  </div>
  <div x-show="myProfile" class="my-banner">
    <div class="banner-inner">
      <div>
        <div style="font-size:.72rem;opacity:.65;">Dein Profil</div>
        <div class="serif" style="font-size:1.1rem;font-weight:700;" x-text="myProfile?.vorname+', '+myProfile?.alter"></div>
      </div>
      <button class="btn btn-soft btn-sm" @click="view='myprofile'" style="background:rgba(255,255,255,.15);border-color:rgba(255,255,255,.3);color:#fff;">Bearbeiten âœï¸</button>
    </div>
  </div>
  <div x-show="isAdmin&&adminQueue.length>0" style="max-width:700px;margin:.9rem auto 0;padding:0 1.2rem;">
    <div style="background:#1a1a1a;border-radius:13px;padding:.85rem 1.1rem;display:flex;align-items:center;justify-content:space-between;cursor:pointer;" @click="view='admin';adminTab='queue'">
      <div style="display:flex;align-items:center;gap:.6rem;color:#fff;">
        <span style="background:var(--red);border-radius:50%;width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center;font-size:.72rem;font-weight:700;" x-text="adminQueue.length"></span>
        <span style="font-size:.85rem;font-weight:600;">Neue Profile warten auf Freigabe</span>
      </div>
      <span style="color:var(--gold);font-size:.82rem;">Zur Queue â†’</span>
    </div>
  </div>
  <div class="sec-title">Singles in Sachsen <span class="count" x-text="filtered.length+' Profile'"></span></div>
  <div class="gallery">
    <template x-for="p in filtered" :key="p.id">
      <div class="card" @click="openDetail(p)">
        <div class="card-img">
          <div class="card-avatar" :style="`background:hsl(${hashColor(p.id)},38%,86%);color:hsl(${hashColor(p.id)},45%,28%)`" x-text="p.vorname.charAt(0)"></div>
          <img x-show="p.bild_url" :src="p.bild_url" @error="p.bild_url=null" loading="lazy"/>
          <div class="badge-v" x-show="p.verifiziert">âœ“ Verifiziert</div>
        </div>
        <div class="card-body">
          <div class="card-name" x-text="p.vorname+', '+p.alter"></div>
          <div class="card-meta">ğŸ“ <span x-text="p.region"></span></div>
          <button class="btn-connect" @click.stop="connectFB(p)">ğŸ’¬ Anschreiben</button>
        </div>
      </div>
    </template>
    <div x-show="filtered.length===0&&!loading" style="grid-column:1/-1;text-align:center;padding:3.5rem 1rem;color:var(--gray5);">
      <div style="font-size:2.5rem;margin-bottom:.7rem;">ğŸ”</div>
      <div style="font-weight:600;margin-bottom:.35rem;color:var(--gray7);">Keine Profile gefunden</div>
      <div style="font-size:.85rem;">Andere Filter wÃ¤hlen oder eigenes Profil erstellen!</div>
    </div>
  </div>
  <button class="fab" @click="openCreate()">âœ¨ Profil erstellen</button>
  <div style="height:5rem;"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PROFIL DETAIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='detail'" class="backdrop fade" @click.self="view='gallery'" x-cloak>
  <div class="sheet slide" x-show="sel">
    <div class="handle"></div>
    <template x-if="sel">
      <div>
        <div x-show="!sel.bild_url" class="detail-avatar" :style="`background:hsl(${hashColor(sel.id)},38%,86%);color:hsl(${hashColor(sel.id)},45%,28%)`" x-text="sel.vorname.charAt(0)"></div>
        <img x-show="sel.bild_url" class="detail-img" :src="sel.bild_url" :alt="sel.vorname" @error="sel.bild_url=null"/>
        <div style="display:flex;align-items:baseline;justify-content:space-between;">
          <h2 class="serif" style="font-size:1.9rem;font-weight:700;" x-text="sel.vorname+', '+sel.alter"></h2>
          <span x-show="sel.verifiziert" style="color:var(--g);font-size:.82rem;font-weight:600;">âœ…</span>
        </div>
        <div style="display:flex;flex-wrap:wrap;gap:.45rem;margin:.6rem 0 .8rem;">
          <span class="tag">ğŸ“ <span x-text="sel.region"></span></span>
        </div>
        <div x-show="sel.eisbrecher" class="bio-box"><div class="bio-lbl">ğŸ’¬ Eisbrecher</div><p style="color:var(--gray7);font-size:.9rem;line-height:1.5;" x-text="sel.eisbrecher"></p></div>
        <div style="display:flex;flex-direction:column;gap:.7rem;margin-top:1.3rem;">
          <button class="btn btn-gold" @click="connectFB(sel)">ğŸ’¬ Auf Facebook anschreiben</button>
          <button class="btn btn-soft" @click="view='gallery'">â† ZurÃ¼ck</button>
        </div>
      </div>
    </template>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PROFIL ERSTELLEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='create'" class="backdrop fade" @click.self="view='gallery'" x-cloak>
  <div class="sheet slide">
    <div class="handle"></div>
    <div class="steps"><template x-for="i in 3"><div class="dot" :class="{on:step===i}"></div></template></div>
    <div x-show="step===1">
      <h2 class="serif" style="font-size:1.5rem;font-weight:700;margin-bottom:.2rem;">Wer bist du? ğŸ‘‹</h2>
      <p style="color:var(--gray5);font-size:.85rem;margin-bottom:1.3rem;">Nur Vorname, Alter, Region â€” kein Nachname.</p>
      <div class="fgroup"><label class="flabel">Vorname *</label><input class="finput" x-model="form.name" placeholder="z.B. Maria"/></div>
      <div class="fgroup"><label class="flabel">Alter *</label><input class="finput" type="number" x-model="form.age" min="18" max="99" placeholder="Mindestens 18"/></div>
      <div class="fgroup"><label class="flabel">Region *</label>
        <select class="finput" x-model="form.region">
          <option value="">Region wÃ¤hlenâ€¦</option>
          <option>Chemnitz</option><option>Dresden</option><option>Leipzig</option>
          <option>Zwickau</option><option>Plauen</option><option>GÃ¶rlitz</option><option>Erzgebirge</option><option>Sonstige</option>
        </select>
      </div>
      <p class="err" x-show="err" x-text="err"></p>
      <button class="btn btn-green" @click="next1()">Weiter â†’ <span style="opacity:.65;font-size:.82rem;">1 / 3</span></button>
    </div>
    <div x-show="step===2">
      <h2 class="serif" style="font-size:1.5rem;font-weight:700;margin-bottom:.2rem;">Dein Facebook-Link ğŸ”—</h2>
      <p style="color:var(--gray5);font-size:.85rem;margin-bottom:1.3rem;">Ã–ffne dein Profil und kopiere die URL aus dem Browser.</p>
      <div class="fgroup"><label class="flabel">Facebook-Link *</label><input class="finput" type="url" x-model="form.fb" placeholder="https://facebook.com/deinname"/></div>
      <div class="fgroup"><label class="flabel">Bild-URL (optional)</label><input class="finput" type="url" x-model="form.img" placeholder="https://..."/></div>
      <div class="fgroup"><label class="flabel">Eisbrecher (optional)</label><textarea class="finput" x-model="form.bio" rows="3" placeholder="Was liebst du an Sachsen am meisten?" style="resize:none;"></textarea></div>
      <p class="err" x-show="err" x-text="err"></p>
      <div style="display:flex;gap:.6rem;"><button class="btn btn-soft" @click="step=1;err=''" style="flex:1;">â† ZurÃ¼ck</button><button class="btn btn-green" @click="next2()" style="flex:2;">Weiter â†’</button></div>
    </div>
    <div x-show="step===3">
      <h2 class="serif" style="font-size:1.5rem;font-weight:700;margin-bottom:.2rem;">Fast geschafft! âœ…</h2>
      <div style="background:var(--gray0);border-radius:12px;padding:.9rem;margin-bottom:1rem;">
        <div style="font-size:.73rem;font-weight:600;color:var(--gray5);margin-bottom:.45rem;">DEINE ANGABEN</div>
        <div style="display:flex;justify-content:space-between;font-size:.88rem;margin-bottom:.25rem;"><span style="color:var(--gray5);">Name</span><strong x-text="form.name"></strong></div>
        <div style="display:flex;justify-content:space-between;font-size:.88rem;margin-bottom:.25rem;"><span style="color:var(--gray5);">Alter</span><strong x-text="form.age"></strong></div>
        <div style="display:flex;justify-content:space-between;font-size:.88rem;"><span style="color:var(--gray5);">Region</span><strong x-text="form.region"></strong></div>
      </div>
      <div class="consent-box" style="margin-bottom:1rem;">
        <input type="checkbox" id="dsgvo" x-model="form.consent"/>
        <label for="dsgvo" style="font-size:.82rem;color:var(--gray7);line-height:1.45;cursor:pointer;">
          Ich bin <strong>Ã¼ber 18</strong> und willige ein, dass mein Profil fÃ¼r Gruppenmitglieder sichtbar ist. Ich kann es jederzeit lÃ¶schen. <a href="datenschutz.html" style="color:var(--g7);">Datenschutz</a>
        </label>
      </div>
      <p class="err" x-show="err" x-text="err"></p>
      <div style="display:flex;gap:.6rem;">
        <button class="btn btn-soft" @click="step=2;err=''" style="flex:1;">â† ZurÃ¼ck</button>
        <button class="btn btn-green" @click="submitProfile()" style="flex:2;" :disabled="loading">
          <span x-show="!loading">ğŸŒ± Profil erstellen</span>
          <span x-show="loading" class="spinner"></span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ERFOLG + MAGIC LINK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='success'" class="backdrop fade" x-cloak>
  <div class="sheet slide">
    <div class="handle"></div>
    <div class="success-box">
      <div style="font-size:2.8rem;margin-bottom:.4rem;">ğŸ‰</div>
      <h2 class="serif" style="font-size:1.5rem;font-weight:700;color:var(--g9);margin-bottom:.2rem;">Profil gespeichert!</h2>
      <p style="color:var(--gray5);font-size:.85rem;">Dein Profil wird vom Admin geprÃ¼ft und dann freigeschaltet.</p>
    </div>
    <div style="font-size:.82rem;font-weight:600;color:var(--gray7);margin-bottom:.4rem;">ğŸ”‘ Dein persÃ¶nlicher Bearbeitungslink:</div>
    <div class="magic-box" x-text="magic"></div>
    <p style="font-size:.75rem;color:var(--gray5);margin-bottom:1rem;">âš ï¸ Speichere diesen Link â€” er ist dein einziger Zugang zur Bearbeitung.</p>
    <div style="display:flex;flex-direction:column;gap:.65rem;">
      <button class="btn btn-gold" @click="shareMagicLink()">ğŸ“¤ Link sichern (Teilen)</button>
      <button class="btn btn-green" @click="view='gallery'">ğŸ  Zur Galerie</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MEIN PROFIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div x-show="view==='myprofile'" x-cloak class="fade">
  <nav class="nav">
    <div class="nav-inner">
      <button class="btn btn-soft btn-sm" @click="view='gallery'">â† Galerie</button>
      <span class="serif" style="font-size:1.1rem;font-weight:700;color:var(--g9);">Mein Profil</span>
      <div style="width:72px;"></div>
    </div>
  </nav>
  <div style="max-width:700px;margin:0 auto;padding:1.5rem 1.2rem;" x-show="myProfile">
    <div style="text-align:center;margin-bottom:1.3rem;">
      <div style="width:90px;height:90px;border-radius:50%;margin:0 auto .7rem;display:flex;align-items:center;justify-content:center;font-family:'Cormorant Garant',serif;font-size:2.7rem;font-weight:700;background:var(--g1);color:var(--g7);" x-text="myProfile?.vorname?.charAt(0)"></div>
      <h2 class="serif" style="font-size:1.5rem;font-weight:700;" x-text="myProfile?.vorname+', '+myProfile?.alter"></h2>
      <span class="tag" x-text="'ğŸ“ '+myProfile?.region"></span>
    </div>
    <div style="background:var(--gold0);border:1.5px solid #e8d57a;border-radius:13px;padding:.9rem;margin-bottom:1.3rem;text-align:center;">
      <div style="font-size:.75rem;color:#6b5700;">Profil-Status</div>
      <div style="font-weight:700;color:#8a6d00;" x-text="myProfile?.status==='Aktiv'?'âœ… Aktiv & sichtbar':'â³ Wartet auf Admin-Freigabe'"></div>
    </div>
    <div class="fgroup"><label class="flabel">Vorname</label><input class="finput" x-model="myProfile.vorname"/></div>
    <div class="fgroup"><label class="flabel">Bild-URL</label><input class="finput" type="url" x-model="myProfile.bild_url" placeholder="https://..."/></div>
    <div class="fgroup"><label class="flabel">Eisbrecher</label><textarea class="finput" x-model="myProfile.eisbrecher" rows="3" style="resize:none;"></textarea></div>
    <div style="display:flex;flex-direction:column;gap:.65rem;margin-top:1.3rem;">
      <button class="btn btn-green" @click="saveMyProfile()" :disabled="loading">
        <span x-show="!loading">ğŸ’¾ Ã„nderungen speichern</span>
        <span x-show="loading" class="spinner"></span>
      </button>
      <div style="border-top:1px solid var(--gray1);margin:.4rem 0;"></div>
      <div style="background:var(--red0);border:1.5px solid var(--red1);border-radius:13px;padding:.9rem;">
        <div style="font-weight:600;color:#b91c1c;font-size:.88rem;margin-bottom:.3rem;">âš ï¸ Profil lÃ¶schen</div>
        <p style="font-size:.78rem;color:#7f1d1d;margin-bottom:.65rem;">Dein Profil wird sofort aus der Galerie entfernt.</p>
        <button class="btn btn-danger" @click="deleteMyProfile()" :disabled="loading">
          <span x-show="!loading">ğŸ—‘ï¸ Profil endgÃ¼ltig lÃ¶schen</span>
          <span x-show="loading" class="spinner"></span>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  âš™ï¸  KONFIGURATION â€” Hier deine zwei Werte eintragen!
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CONFIG = {
  // âœ… Google Apps Script Web-App URL:
  API_URL: "https://script.google.com/macros/s/AKfycbxW9WEghw-lKYybRKyRcETSklbF1-EotGrutg3f4yT_DS6T6hotMwT0JlIUTZl-F4MQ/exec",

  // âœ… API-Key (muss mit Script-Property API_KEY Ã¼bereinstimmen):
  API_KEY: "admin-key-2026-ssc",

  // Admin-PIN (NUR fÃ¼r lokalen Demo-Modus â€” im echten Betrieb wird der PIN
  // im Google Apps Script als Property gespeichert und geprÃ¼ft):
  ADMIN_PIN: "1234",

  // âœ… Demo-Modus deaktiviert â€” App nutzt das echte Backend!
  DEMO_MODE: false,

  // ğŸ› Debug: true = API-Fehler werden als Popup angezeigt (zum Testen)
  DEBUG: true,
};
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€â”€ API-Layer: Alle Backend-Calls an einer Stelle â”€â”€
const API = {

  async get(action, params = {}) {
    if (CONFIG.DEMO_MODE) return null;
    try {
      const url = new URL(CONFIG.API_URL);
      url.searchParams.set("action", action);
      url.searchParams.set("key", CONFIG.API_KEY);
      Object.entries(params).forEach(([k, v]) => url.searchParams.set(k, v));
      const res = await fetch(url.toString());
      if (!res.ok) throw new Error("HTTP " + res.status);
      return res.json();
    } catch(e) {
      if (CONFIG.DEBUG) alert("ğŸ› API GET Fehler [" + action + "]:\n" + e.message);
      return { success: false, error: e.message };
    }
  },

  async post(action, body = {}) {
    if (CONFIG.DEMO_MODE) return null;
    try {
      const res = await fetch(CONFIG.API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ action, api_key: CONFIG.API_KEY, ...body }),
        mode: "cors",
      });
      if (!res.ok) throw new Error("HTTP " + res.status);
      return res.json();
    } catch(e) {
      if (CONFIG.DEBUG) alert("ğŸ› API POST Fehler [" + action + "]:\n" + e.message + "\n\nMÃ¶gliche Ursachen:\n- CORS-Problem mit Google Apps Script\n- Script nicht korrekt deployed\n- API_KEY stimmt nicht Ã¼berein");
      return { success: false, error: e.message };
    }
  },

  // Admin-Login: PIN wird ans Backend geschickt â€” niemals lokal geprÃ¼ft!
  async adminLogin(pin) {
    if (CONFIG.DEMO_MODE) return { success: pin === "1234" };
    return await this.post("adminlogin", { pin });
  },

  // SHA-256 des Wochencodes lokal berechnen (Code geht NIE Ã¼bers Netz!)
  async hashCode(plain) {
    const buf = await crypto.subtle.digest(
      "SHA-256",
      new TextEncoder().encode(plain)
    );
    return Array.from(new Uint8Array(buf))
      .map(b => b.toString(16).padStart(2, "0")).join("");
  }
};

// â”€â”€ Demo-Daten (werden nur im DEMO_MODE genutzt) â”€â”€
const DEMO_PROFILES = [
  {id:1,vorname:'Sophie', alter:27,region:'Dresden',   fb_link:'https://facebook.com/demo1',bild_url:null,eisbrecher:'Wandern im Erzgebirge und Kaffee auf der BrÃ¼hlschen Terrasse.',verifiziert:true},
  {id:2,vorname:'Lukas',  alter:34,region:'Leipzig',   fb_link:'https://facebook.com/demo2',bild_url:null,eisbrecher:'Weltmeister im Grillieren, Amateur im Tanzen.',verifiziert:true},
  {id:3,vorname:'Jana',   alter:29,region:'Chemnitz',  fb_link:'https://facebook.com/demo3',bild_url:null,eisbrecher:null,verifiziert:false},
  {id:4,vorname:'Tobias', alter:42,region:'Zwickau',   fb_link:'https://facebook.com/demo4',bild_url:null,eisbrecher:'Leidenschaftlicher Motorradfahrer.',verifiziert:true},
  {id:5,vorname:'Marie',  alter:31,region:'Erzgebirge',fb_link:'https://facebook.com/demo5',bild_url:null,eisbrecher:null,verifiziert:false},
  {id:6,vorname:'Robert', alter:38,region:'GÃ¶rlitz',   fb_link:'https://facebook.com/demo6',bild_url:null,eisbrecher:'StadtfÃ¼hrer aus Ãœberzeugung!',verifiziert:true},
];
const DEMO_QUEUE = [
  {id:7,vorname:'Anna',   alter:25,region:'Dresden',   fb_link:'https://facebook.com/anna25',  eisbrecher:'Yoga, Kaffee, Regen.',timestamp:new Date().toISOString()},
  {id:8,vorname:'Markus', alter:45,region:'Leipzig',   fb_link:'https://facebook.com/markus45',eisbrecher:null,timestamp:new Date().toISOString()},
];

function app() {
  return {
    // State
    view: 'lock', loading: false, loadingMsg: 'LÃ¤dtâ€¦',
    toast: false, toastMsg: '',
    code: '', lockErr: false,
    fRegion: '', fAge: '', fVerified: false,
    sel: null, myProfile: null, magic: '',
    step: 1, err: '',
    form: {name:'',age:'',region:'',fb:'',img:'',bio:'',consent:false},

    // Profile
    profiles: [],
    filtered: [],
    allAdminProfiles: [],

    // Admin
    isAdmin: false,
    adminPin: '', adminErr: false,
    adminTab: 'queue',
    adminFilter: '', adminRegionFilter: '',
    adminQueue: [],
    newWeekCode: '', currentWeekCode: '', codeChanged: false,

    // Computed stats
    get stats() {
      const all = this.allAdminProfiles;
      return {
        total:    all.length,
        aktiv:    all.filter(p=>p.status==='Aktiv').length,
        gesperrt: all.filter(p=>p.status==='Gesperrt').length,
        neu:      this.adminQueue.length,
      };
    },
    get regionStats() {
      const regions = ['Dresden','Leipzig','Chemnitz','Zwickau','Erzgebirge','GÃ¶rlitz','Plauen','Sonstige'];
      return regions.map(r=>({name:r, count:this.profiles.filter(p=>p.region===r).length}))
                    .filter(r=>r.count>0).sort((a,b)=>b.count-a.count);
    },
    get ageStats() {
      const groups = [{label:'18â€“29',min:18,max:29},{label:'30â€“39',min:30,max:39},{label:'40â€“49',min:40,max:49},{label:'50+',min:50,max:99}];
      return groups.map(g=>({label:g.label, count:this.profiles.filter(p=>p.alter>=g.min&&p.alter<=g.max).length}));
    },
    get filteredAdmin() {
      return this.allAdminProfiles.filter(p=>{
        if(this.adminFilter && p.status!==this.adminFilter) return false;
        if(this.adminRegionFilter && p.region!==this.adminRegionFilter) return false;
        return true;
      });
    },

    // â”€â”€ INIT â”€â”€
    async init() {
      const savedCode    = localStorage.getItem('ssc_code');
      const savedProfile = localStorage.getItem('ssc_profile');
      const savedAdmin   = localStorage.getItem('ssc_admin');

      if (savedProfile) this.myProfile = JSON.parse(savedProfile);
      if (savedAdmin === '1') this.isAdmin = true;

      // URL-Parameter: Edit-Token fÃ¼r direkten Zugang
      const params = new URLSearchParams(window.location.search);
      const editToken = params.get('edit');
      if (editToken) {
        await this.loadProfileByToken(editToken);
        return;
      }

      if (savedCode) {
        this.view = 'gallery';
        await this.loadProfiles();
      }
    },

    // â”€â”€ WOCHENCODE PRÃœFEN â”€â”€
    async checkCode() {
      if (!this.code.trim()) return;
      this.loading = true;
      this.loadingMsg = 'Code wird geprÃ¼ftâ€¦';

      try {
        if (CONFIG.DEMO_MODE) {
          // Demo: Codes direkt prÃ¼fen
          const valid = ['SACHSEN','sachsen','Sachsen'].includes(this.code.trim());
          if (valid) {
            localStorage.setItem('ssc_code', this.code.trim());
            this.view = 'gallery';
            await this.loadProfiles();
          } else {
            this.lockErr = true;
            this.code = '';
          }
        } else {
          // Echtes System: SHA-256-Hash erzeugen und gegen API prÃ¼fen
          const hash = await API.hashCode(this.code.trim());
          const res = await API.get('checkcode', { hash });
          if (res?.valid) {
            localStorage.setItem('ssc_code', this.code.trim());
            this.view = 'gallery';
            await this.loadProfiles();
          } else {
            this.lockErr = true;
            this.code = '';
          }
        }
      } finally {
        this.loading = false;
      }
    },

    // â”€â”€ PROFILE LADEN â”€â”€
    async loadProfiles() {
      this.loading = true;
      this.loadingMsg = 'Profile werden geladenâ€¦';
      try {
        if (CONFIG.DEMO_MODE) {
          this.profiles = [...DEMO_PROFILES];
        } else {
          const res = await API.get('profiles');
          if (res?.success) this.profiles = res.profiles;
        }
        this.applyFilters();
      } finally {
        this.loading = false;
      }
    },

    applyFilters() {
      this.filtered = this.profiles.filter(p => {
        if (this.fRegion && p.region !== this.fRegion) return false;
        if (this.fVerified && !p.verifiziert) return false;
        if (this.fAge) {
          const [a, b] = this.fAge.split('-').map(Number);
          if (p.alter < a || p.alter > b) return false;
        }
        return true;
      });
    },

    // â”€â”€ PROFIL PER TOKEN LADEN (URL-Edit-Link) â”€â”€
    async loadProfileByToken(token) {
      this.loading = true;
      this.loadingMsg = 'Profil wird geladenâ€¦';
      try {
        let profileData;
        if (CONFIG.DEMO_MODE) {
          profileData = JSON.parse(localStorage.getItem('ssc_profile'));
        } else {
          const res = await API.get('verify', { token });
          if (res?.success) {
            profileData = { ...res, token };
            localStorage.setItem('ssc_token', token);
            localStorage.setItem('ssc_profile', JSON.stringify(profileData));
          }
        }
        if (profileData) {
          this.myProfile = profileData;
          this.view = 'myprofile';
        } else {
          this.showToast('âŒ Kein Profil mit diesem Link gefunden.');
          this.view = 'lock';
        }
      } finally {
        this.loading = false;
      }
    },

    // â”€â”€ PROFIL ERSTELLEN â”€â”€
    next1() {
      if (!this.form.name.trim())                 { this.err = 'Bitte gib deinen Vornamen ein.'; return; }
      if (!this.form.age || this.form.age < 18)   { this.err = 'Du musst mindestens 18 Jahre alt sein.'; return; }
      if (!this.form.region)                       { this.err = 'Bitte wÃ¤hle deine Region.'; return; }
      this.err = ''; this.step = 2;
    },
    next2() {
      if (!this.form.fb.includes('facebook.com')) { this.err = 'Bitte einen gÃ¼ltigen Facebook-Link eingeben.'; return; }
      this.err = ''; this.step = 3;
    },

    async submitProfile() {
      if (!this.form.consent) { this.err = 'Bitte bestÃ¤tige die Einwilligung.'; return; }
      this.loading = true;
      this.loadingMsg = 'Profil wird gespeichertâ€¦';
      try {
        if (CONFIG.DEMO_MODE) {
          // Demo: lokal simulieren
          const token = 'ssc-' + Math.random().toString(36).substr(2,10) + '-' + Date.now().toString(36);
          const p = { vorname:this.form.name, alter:parseInt(this.form.age), region:this.form.region,
                      fb_link:this.form.fb, bild_url:this.form.img, eisbrecher:this.form.bio,
                      token, status:'Neu' };
          localStorage.setItem('ssc_token', token);
          localStorage.setItem('ssc_profile', JSON.stringify(p));
          this.myProfile = p;
          this.adminQueue.push({id:Date.now(),vorname:p.vorname,alter:p.alter,region:p.region,
                                 fb_link:p.fb_link,eisbrecher:p.eisbrecher,timestamp:new Date().toISOString()});
          this.magic = window.location.origin + window.location.pathname + '?edit=' + token;
          this.view = 'success';
        } else {
          // Echtes Backend
          const res = await API.post('register', {
            vorname:    this.form.name,
            alter:      parseInt(this.form.age),
            region:     this.form.region,
            fb_link:    this.form.fb,
            bild_url:   this.form.img  || '',
            eisbrecher: this.form.bio  || '',
            dsgvo:      true,
          });
          if (res?.success) {
            localStorage.setItem('ssc_token', res.token);
            const p = { vorname:this.form.name, alter:parseInt(this.form.age), region:this.form.region,
                        fb_link:this.form.fb, bild_url:this.form.img, eisbrecher:this.form.bio,
                        token:res.token, status:'Neu' };
            localStorage.setItem('ssc_profile', JSON.stringify(p));
            this.myProfile = p;
            this.magic = window.location.origin + window.location.pathname + '?edit=' + res.token;
            this.view = 'success';
          } else if (res?.code === 409) {
            // Duplikat: Profil schon vorhanden
            this.err = 'Du hast bereits ein Profil mit diesem Facebook-Link.';
            if (res.existingToken) {
              this.magic = window.location.origin + window.location.pathname + '?edit=' + res.existingToken;
              this.err += ' Dein Bearbeitungslink: ' + this.magic;
            }
          } else {
            this.err = res?.error || 'Fehler beim Speichern. Bitte versuche es erneut.';
            if (CONFIG.DEBUG && res) this.err += ' [Code: ' + (res.code||'?') + ']';
          }
        }
      } finally {
        this.loading = false;
      }
    },

    // â”€â”€ PROFIL BEARBEITEN â”€â”€
    async saveMyProfile() {
      if (!this.myProfile?.token) return;
      this.loading = true;
      this.loadingMsg = 'Wird gespeichertâ€¦';
      try {
        if (CONFIG.DEMO_MODE) {
          localStorage.setItem('ssc_profile', JSON.stringify(this.myProfile));
          this.showToast('âœ… Gespeichert! Wartet auf Admin-Freigabe.');
        } else {
          const res = await API.post('update', {
            token:      this.myProfile.token,
            vorname:    this.myProfile.vorname,
            bild_url:   this.myProfile.bild_url   || '',
            eisbrecher: this.myProfile.eisbrecher  || '',
          });
          if (res?.success) {
            localStorage.setItem('ssc_profile', JSON.stringify(this.myProfile));
            this.showToast('âœ… Gespeichert! Wartet auf Admin-Freigabe.');
          } else {
            this.showToast('âŒ Fehler: ' + (res?.error || 'Unbekannt'));
          }
        }
      } finally {
        this.loading = false;
      }
    },

    // â”€â”€ PROFIL LÃ–SCHEN â”€â”€
    async deleteMyProfile() {
      if (!confirm('Profil wirklich lÃ¶schen? Das kann nicht rÃ¼ckgÃ¤ngig gemacht werden.')) return;
      this.loading = true;
      this.loadingMsg = 'Profil wird gelÃ¶schtâ€¦';
      try {
        if (!CONFIG.DEMO_MODE && this.myProfile?.token) {
          await API.post('delete', { token: this.myProfile.token });
        }
        localStorage.removeItem('ssc_token');
        localStorage.removeItem('ssc_profile');
        this.myProfile = null;
        this.view = 'gallery';
        this.showToast('ğŸ—‘ï¸ Profil gelÃ¶scht.');
      } finally {
        this.loading = false;
      }
    },

    // â”€â”€ MAGIC LINK TEILEN â”€â”€
    shareMagicLink() {
      if (navigator.share) {
        navigator.share({ title: 'Mein Sachsen Singles Profil', url: this.magic });
      } else {
        navigator.clipboard?.writeText(this.magic);
        this.showToast('ğŸ“‹ Link in Zwischenablage kopiert!');
      }
    },

    // â”€â”€ ADMIN LOGIN â”€â”€
    async checkAdmin() {
      if (!this.adminPin.trim()) return;
      this.loading = true;
      this.loadingMsg = 'PIN wird geprÃ¼ftâ€¦';
      try {
        const res = await API.adminLogin(this.adminPin);
        if (res?.success) {
          this.isAdmin = true;
          localStorage.setItem('ssc_admin', '1');
          this.adminQueue = [...DEMO_QUEUE];
          this.allAdminProfiles = [...DEMO_PROFILES].map(p=>({...p,status:'Aktiv',timestamp:new Date().toISOString()}));
          this.currentWeekCode = 'SACHSEN';
          this.view = 'admin';
          this.adminTab = 'queue';
        } else {
          this.adminErr = true;
          this.adminPin = '';
        }
      } finally {
        this.loading = false;
      }
    },

    adminLogout() {
      this.isAdmin = false;
      localStorage.removeItem('ssc_admin');
      this.view = 'lock';
    },

    // â”€â”€ ADMIN QUEUE AKTIONEN â”€â”€
    async adminApprove(i) {
      const p = this.adminQueue[i];
      if (!CONFIG.DEMO_MODE) {
        await API.post('update', { token: p.token, status: 'Aktiv' });
      }
      this.profiles.push({ ...p, verifiziert: true });
      this.allAdminProfiles.push({ ...p, status: 'Aktiv' });
      this.adminQueue.splice(i, 1);
      this.applyFilters();
      this.showToast('âœ… Profil freigegeben!');
    },

    async adminBan(i) {
      if (!confirm('Profil von ' + this.adminQueue[i].vorname + ' sperren?')) return;
      const p = this.adminQueue[i];
      this.allAdminProfiles.push({ ...p, status: 'Gesperrt' });
      this.adminQueue.splice(i, 1);
      this.showToast('ğŸš« Profil gesperrt.');
    },

    async adminDelete(i) {
      if (!confirm('Profil wirklich lÃ¶schen?')) return;
      this.adminQueue.splice(i, 1);
      this.showToast('ğŸ—‘ï¸ Profil gelÃ¶scht.');
    },

    async adminSetStatus(id, status) {
      const idx = this.allAdminProfiles.findIndex(p => p.id === id);
      if (idx > -1) this.allAdminProfiles[idx].status = status;
      const pidx = this.profiles.findIndex(p => p.id === id);
      if (status === 'Aktiv' && pidx === -1) {
        this.profiles.push({ ...this.allAdminProfiles[idx] });
      } else if (status !== 'Aktiv' && pidx > -1) {
        this.profiles.splice(pidx, 1);
      }
      this.applyFilters();
      this.showToast(status === 'Aktiv' ? 'âœ… Aktiviert!' : status === 'Gesperrt' ? 'ğŸš« Gesperrt.' : 'â†©ï¸ Status geÃ¤ndert.');
    },

    async adminDeleteById(id) {
      if (!confirm('Profil wirklich lÃ¶schen?')) return;
      this.allAdminProfiles = this.allAdminProfiles.filter(p => p.id !== id);
      this.profiles = this.profiles.filter(p => p.id !== id);
      this.applyFilters();
      this.showToast('ğŸ—‘ï¸ Profil gelÃ¶scht.');
    },

    async loadAdminProfiles() {}, // Placeholder fÃ¼r echten API-Call

    openFB(url) { window.open(url, '_blank', 'noopener'); },

    changeWeekCode() {
      const old = this.currentWeekCode;
      this.currentWeekCode = this.newWeekCode.toUpperCase();
      this.codeChanged = true;
      this.newWeekCode = '';
      // Im echten System: setNewWeekCode() im Apps Script aufrufen
      this.showToast('ğŸ”„ Code gewechselt: ' + this.currentWeekCode);
      setTimeout(() => this.codeChanged = false, 6000);
    },

    // â”€â”€ HELPERS â”€â”€
    openDetail(p) { this.sel = p; this.view = 'detail'; },
    openCreate() {
      this.form = {name:'',age:'',region:'',fb:'',img:'',bio:'',consent:false};
      this.step = 1; this.err = ''; this.view = 'create';
    },
    connectFB(p) {
      const username = p.fb_link.split('/').filter(Boolean).pop();
      window.open('https://m.me/' + username, '_blank', 'noopener');
    },
    logout() {
      localStorage.removeItem('ssc_code');
      localStorage.removeItem('ssc_admin');
      this.isAdmin = false;
      this.view = 'lock';
    },
    hashColor(id) { return (id * 53) % 360; },
    formatDate(iso) {
      if (!iso) return '';
      const d = new Date(iso);
      const now = new Date();
      const diff = Math.floor((now - d) / 60000);
      if (diff < 1)   return 'Gerade eben';
      if (diff < 60)  return `vor ${diff} Min.`;
      if (diff < 1440) return `vor ${Math.floor(diff/60)} Std.`;
      return d.toLocaleDateString('de-DE');
    },
    showToast(msg, duration = 2800) {
      this.toastMsg = msg; this.toast = true;
      setTimeout(() => this.toast = false, duration);
    },
  };
}
</script>
</body>
</html>
